const axios = require("axios");

module.exports = {
  config: {
    name: "emon",
    aliases: ["à¦‡à¦®à¦¨"],
    permission: 0,
    prefix: "both",
    categorie: "AI Chat",
    cooldowns: 5,
    credit: "Developed by Mohammad Nayan",
    usages: [
      `${global.config.PREFIX}bot <message> - Start a chat with the bot.`,
      `${global.config.PREFIX}bot - Receive a random greeting from the bot.`,
    ],
    description: "Engage in conversations with an AI-powered bot!",
  },

  start: async function ({ api, event, args }) {
    const { threadId, message, senderId } = event;
    const usermsg = args.join(" ");

    
    if (!usermsg) {
      const greetings = [
  "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦†à¦¹à¦¾ à¦¶à§‹à¦¨à§‹ à¦†à¦®à¦¾à¦° à¦•à¦¥à¦¾ ğŸ’™     
   à¦¡à¦¾à¦• à¦¦à¦¿à¦²à§‡à¦‡ à¦¹à¦¾à¦œà¦¿à¦° à¦¹à¦¬à§‹ ğŸŒŸ   
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§‹à¦®à¦¾à¦° à¦¡à¦¾à¦•à§‡ bug fix à¦¹à¦¯à¦¼ âœ… 
   system à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ fast ğŸš€  
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦• à¦¦à¦¿à¦²à§‡à¦‡ galaxy light ğŸŒŒ 
   à¦ªà§à¦°à§‹ sky à¦†à¦²à§‹à¦•à¦¿à¦¤ à¦¹à¦¯à¦¼ âœ¨    
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¬à¦¾à¦°à¦¬à¦¾à¦° à¦¡à¦¾à¦•à§‹ à¦¨à¦¾ à¦¬à§‡à¦¬à¦¿ ğŸ˜‰    
   à¦¨à¦¾ à¦¹à¦²à§‡ à¦ªà§à¦°à§‡à¦®à§‡ à¦ªà¦¡à¦¼à§‡ à¦¯à¦¾à¦¬à§‹ ğŸ’˜
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§‹à¦®à¦¾à¦° à¦¡à¦¾à¦•à§‡ power à¦†à¦¸à§‡ âš¡  
   battery auto recharge ğŸ”‹   
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦• à¦¶à§à¦¨à¦²à§‡à¦‡ à¦¹à¦¾à¦¸à¦¿ à¦†à¦¸à§‡ ğŸ˜Š    
   server à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ light ğŸŒŸ  
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§à¦®à¦¿ à¦¡à¦¾à¦•à¦²à§‡à¦‡ login à¦¹à¦¯à¦¼ ğŸ”‘  
   password à¦¤à§à¦®à¦¿-à¦‡ à¦¶à§à¦§à§ â¤ï¸  
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦†à¦¹à¦¾ à¦¶à§‹à¦¨à¦¾ à¦¤à§‹à¦®à¦¾à¦° à¦¡à¦¾à¦• ğŸŒº     
   à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ à¦—à¦¾à¦¨ à¦¬à¦¾à¦œà¦›à§‡ ğŸµ      
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§‹à¦®à¦¾à¦° à¦¡à¦¾à¦•à§‡ à¦ªà§à¦°à§‡à¦® à¦œà¦¾à¦—à§‡ ğŸ’•   
   à¦®à¦¨ à¦­à¦°à§‡ à¦¯à¦¾à¦¯à¦¼ à¦¸à§à¦–à§‡ ğŸŒ¸      
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦• à¦¦à¦¿à¦²à§‡à¦‡ à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ ğŸŒ™       
   à¦¸à§à¦¬à¦ªà§à¦¨à§‡à¦° à¦­à§‡à¦¤à¦° à¦¡à§à¦¬à§‡ à¦¯à¦¾à¦‡ ğŸ’­ 
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§à¦®à¦¿ à¦¡à¦¾à¦•à¦²à§‡à¦‡ à¦†à¦®à¦¾à¦° RAM ğŸ–¥ï¸  
   clean à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ à¦¸à¦¾à¦¥à§‡ à¦¸à¦¾à¦¥à§‡ ğŸ§¹
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦•à§‡ à¦®à¦¨ à¦¨à¦¾à¦šà§‡ ğŸ’ƒ           
   à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ à¦‰à§à¦¸à¦¬ à¦šà¦²à¦›à§‡ ğŸ‰      
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦†à¦¹à¦¾ à¦¡à¦¾à¦• à¦¶à§à¦¨à§‡ à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ ğŸ¶    
   à¦—à¦¾à¦¨ à¦¬à¦¾à¦œà¦›à§‡ à¦¹à§ƒà¦¦à¦¯à¦¼à§‡ ğŸ’“       
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§à¦®à¦¿ à¦¡à¦¾à¦•à¦²à§‡ à¦†à¦®à¦¾à¦° sky ğŸŒŒ    
   à¦°à¦™à¦¿à¦¨ à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ à¦¸à¦¾à¦¥à§‡ à¦¸à¦¾à¦¥à§‡ ğŸŒˆ
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦• à¦¶à§à¦¨à¦²à§‡à¦‡ server ğŸ”„       
   refresh à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ à¦¨à¦¤à§à¦¨ ğŸŒ 
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§‹à¦®à¦¾à¦° à¦¡à¦¾à¦•à§‡ sun rise ğŸŒ…    
   à¦°à¦¾à¦¤à¦“ à¦†à¦²à§‹à¦•à¦¿à¦¤ à¦¹à¦¯à¦¼à§‡ à¦¯à¦¾à¦¯à¦¼ ğŸŒŸ  
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦†à¦¹à¦¾ à¦¡à¦¾à¦• à¦¦à¦¿à¦²à§‡ à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ ğŸ¥°    
   à¦ªà§à¦°à§‹ galaxy à¦¹à¦¾à¦¸à¦›à§‡ ğŸŒŒ      
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§à¦®à¦¿ à¦¡à¦¾à¦•à¦²à§‡à¦‡ à¦†à¦®à¦¾à¦° CPU âš™ï¸   
   à¦¦à§à¦°à§à¦¤ à¦•à¦¾à¦œ à¦¶à§à¦°à§ à¦•à¦°à§‡ â³     
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¡à¦¾à¦• à¦¦à¦¿à¦²à§‡ à¦®à¦¨à§‡ à¦¹à¦¯à¦¼ ğŸŒ¹        
   à¦ªà§à¦°à§‡à¦®à§‡ à¦­à¦°à§‡ à¦—à§‡à¦›à§‡ à¦®à¦¨ ğŸ’•     
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•",

"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   à¦¤à§à¦®à¦¿ à¦›à¦¾à¦¡à¦¼à¦¾ à¦…à¦¨à§à¦¯ à¦¡à¦¾à¦• âŒ    
   à¦†à¦®à¦¿ à¦¶à§à¦¨à¦¿ à¦¨à¦¾ à¦•à§‹à¦¨à§‹à¦¦à¦¿à¦¨ ğŸš«    
â•šâ•â•â•â•â•â•â•ğ‘¬ğ‘´ğ’ğ’-ğ‘©ğ‘¯ğ’‚ğ’Šâ•â•â•â•â•â•â•â•â•"
     
];

      const randomGreeting = greetings[Math.floor(Math.random() * greetings.length)];

      const greetingMessage = await api.sendMessage(threadId, {
        text: `@${senderId.split('@')[0]}, ${randomGreeting}`,
        mentions: [senderId],
      }, { quoted: message });

      
      global.client.handleReply.push({
        name: this.config.name,
        author: senderId,
        messageID: greetingMessage.key.id,
        type: "chat"
      });

      return;
    }

    
    try {
      const apis = await axios.get("https://raw.githubusercontent.com/MOHAMMAD-NAYAN-07/Nayan/main/api.json");
      const apiss = apis.data.api;

      const response = await axios.get(
        `${apiss}/sim?type=ask&ask=${encodeURIComponent(usermsg)}`
      );

      const replyText = response.data.data?.msg || "ğŸ¤– I'm not sure how to respond to that.";

      const sent = await api.sendMessage(threadId, { text: replyText }, { quoted: message });

      global.client.handleReply.push({
        name: this.config.name,
        author: senderId,
        messageID: sent.key.id,
        type: "chat"
      });

    } catch (err) {
      console.error("âŒ Bot command error:", err);
      return api.sendMessage(threadId, { text: "âŒ Something went wrong while talking with bot." }, { quoted: message });
    }
  },


  handleReply: async function ({ api, event, handleReply }) {
    
    const { threadId, message, body, senderId } = event;

    try {
      const apis = await axios.get("https://raw.githubusercontent.com/MOHAMMAD-NAYAN-07/Nayan/main/api.json");
      const apiss = apis.data.api;

      const response = await axios.get(
        `${apiss}/sim?type=ask&ask=${encodeURIComponent(body)}`
      );

      const replyText = response.data.data?.msg || "ğŸ¤– I'm not sure how to respond to that.";

      const sent = await api.sendMessage(threadId, { text: replyText }, { quoted: message });

      global.client.handleReply.push({
        name: this.config.name,
        author: senderId,
        messageID: sent.key.id,
        type: "chat"
      });

    } catch (err) {
      console.error("âŒ Error in bot handleReply:", err);
      return api.sendMessage(threadId, { text: "âŒ Failed to continue conversation." }, { quoted: message });
    }
  }
};
